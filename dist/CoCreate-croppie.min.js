!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.croppie=t())}(this,(function(){return(()=>{"use strict";var e={};var t=new AWS.S3({region:"us-east-1",accessKeyId:"AKIAZKETJ5PSTFJ54J7O",secretAccessKey:"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"});function n(e,n,r){let o={Bucket:"cocreate-test",Key:n,Body:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,l=new Uint8Array(i);for(;i--;)l[i]=o.charCodeAt(i);return new File([l],t,{type:r})}(e,n),ACL:"public-read-write"};t.upload(o,(function(e,t){r(e,t)}))}var r=[];function o(e,t){e.resizer.result("base64").then((function(e){t(e)}))}function i(e){let t=function(e){let t=e.id,n=e.querySelector(".croppie"),r=e.querySelector("input[type='file']");if(!t||!n)return!1;let o=new Croppie(e,{boundary:{width:300,height:300},viewport:{width:200,height:200},showZoomer:!0,enableOrientation:!0,enableZoom:!0,mouseWheelZoom:"ctrl"});return r&&r.addEventListener("change",(function(e){if(0==this.files.length)return;let t=this.files[0],n=new FileReader;n.onload=function(e){o.bind({url:e.target.result})},n.readAsDataURL(t)})),e.addEventListener("uploadImage",(function(e){let t=e.detail.url,n=this.id,r=document.querySelectorAll("[data-uploader_id='"+n+"'].imageInput");for(let e=0;e<r.length;e++)r[e].value=t})),{eId:t,croppie:n,fileTag:r,el:e,resizer:o,bind:null}}(e);t&&r.push(t)}function l(e){let t=e.fileTag;t&&t.click()}function u(e){for(let t=0;t<r.length;t++)if(r[t].eId==e)return r[t];return!1}function a(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(let o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*r));return t+".jpg"}return function(){let e=document.querySelectorAll(".image-uploader");for(let t=0;t<e.length;t++){i(e[t])}}(),function(){let e=document.querySelectorAll(".imageUpload");for(let t=0;t<e.length;t++){e[t].addEventListener("click",(function(e){let t=u(this.getAttribute("data-uploader_id"));t&&l(t)}))}let t=document.querySelectorAll(".imageSave");for(let e=0;e<t.length;e++){t[e].addEventListener("click",(function(e){let t=u(this.getAttribute("data-uploader_id"));t&&o(t,(function(e){n(e,a(20),(function(e,n){if(n){let e=n.Location,r=new CustomEvent("uploadImage",{detail:{url:e}});t.el.dispatchEvent(r)}}))}))}))}}(),e=e.default})()}));